<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Quiz Game</title>
<style>
  body { font-family: Arial, sans-serif; background: #f4f7fb; margin: 0; padding: 0; text-align: center; }
  .quiz-container { max-width: 600px; margin: auto; padding: 20px; }
  h1 { color: #333; }
  .question { font-size: 1.2em; margin: 15px 0; }
  svg { max-width: 100%; height: auto; margin: 10px 0; border: 2px solid #ddd; border-radius: 8px; }
  .btn { display: block; width: 100%; background: #fff; border: 2px solid #007bff; color: #007bff; padding: 12px; margin: 8px 0; border-radius: 8px; font-size: 1em; cursor: pointer; }
  .btn.correct { background: #28a745; color: #fff; }
  .btn.wrong { background: #dc3545; color: #fff; }
  #next-btn { display: none; margin-top: 15px; padding: 12px 20px; border-radius: 8px; background: #007bff; color: #fff; border: none; }
  .score { font-size: 1.5em; margin-top: 20px; color: #333; }
</style>
</head>
<body>
<div class="quiz-container">
  <h1>Study Quiz Game</h1>
  <div id="question-container">
    <div class="question" id="question">Loading...</div>
    <div id="answer-buttons"></div>
  </div>
  <button id="next-btn">Next Question</button>
  <div class="score" id="score"></div>
</div>

<script>
const questions = [
  { 
    question: "Which structure is the arrow pointing to on the heart?",
    // ðŸ‘‡ Instead of referencing an external file, we embed the SVG directly
    image: `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
        <rect width="100%" height="100%" fill="white"/>
        <!-- Heart base -->
        <ellipse cx="400" cy="300" rx="180" ry="220" fill="#f28b82" stroke="black" stroke-width="3"/>
        <ellipse cx="340" cy="250" rx="60" ry="70" fill="#aecbfa" stroke="black"/>
        <ellipse cx="460" cy="350" rx="80" ry="100" fill="#fbbc04" stroke="black"/>
        <ellipse cx="420" cy="280" rx="40" ry="20" fill="#fff" stroke="black"/>
        <circle cx="450" cy="220" r="18" fill="#fff" stroke="black"/>
        <!-- Arrows -->
        <defs>
          <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="red"/>
          </marker>
        </defs>
        <line x1="200" y1="200" x2="320" y2="240" stroke="red" stroke-width="4" marker-end="url(#arrowhead)"/>
        <line x1="600" y1="400" x2="500" y2="360" stroke="red" stroke-width="4" marker-end="url(#arrowhead)"/>
        <line x1="300" y1="320" x2="390" y2="280" stroke="red" stroke-width="4" marker-end="url(#arrowhead)"/>
        <line x1="600" y1="180" x2="465" y2="220" stroke="red" stroke-width="4" marker-end="url(#arrowhead)"/>
      </svg>
    `,
    answers: ["Right Atrium", "Left Ventricle", "Mitral Valve", "Aortic Valve"],
    correct: 0 
  },
  { 
    question: "What hormone lowers blood calcium?",
    answers: ["PTH", "Calcitonin", "Aldosterone", "Cortisol"], 
    correct: 1 
  }
];

let shuffledQuestions = [];
let currentQuestionIndex = 0;
let score = 0;

const questionElement = document.getElementById("question");
const answerButtons = document.getElementById("answer-buttons");
const nextButton = document.getElementById("next-btn");
const scoreElement = document.getElementById("score");

function startGame() {
  shuffledQuestions = questions.sort(() => Math.random() - 0.5);
  currentQuestionIndex = 0;
  score = 0;
  scoreElement.innerText = "";
  nextButton.innerText = "Next Question";
  showQuestion();
}

function showQuestion() {
  resetState();
  let currentQuestion = shuffledQuestions[currentQuestionIndex];
  questionElement.innerHTML = currentQuestion.question;
  if (currentQuestion.image) {
    const wrapper = document.createElement("div");
    wrapper.innerHTML = currentQuestion.image;
    questionElement.appendChild(wrapper.firstChild);
  }
  currentQuestion.answers.forEach((answer, index) => {
    const button = document.createElement("button");
    button.innerText = answer;
    button.classList.add("btn");
    if (index === currentQuestion.correct) button.dataset.correct = true;
    button.addEventListener("click", selectAnswer);
    answerButtons.appendChild(button);
  });
}

function resetState() {
  nextButton.style.display = "none";
  while (answerButtons.firstChild) {
    answerButtons.removeChild(answerButtons.firstChild);
  }
}

function selectAnswer(e) {
  const selectedBtn = e.target;
  const isCorrect = selectedBtn.dataset.correct === "true";
  if (isCorrect) { selectedBtn.classList.add("correct"); score++; }
  else { selectedBtn.classList.add("wrong"); }
  Array.from(answerButtons.children).forEach(b => {
    if (b.dataset.correct === "true") b.classList.add("correct");
    b.disabled = true;
  });
  nextButton.style.display = "block";
}

nextButton.addEventListener("click", () => {
  currentQuestionIndex++;
  if (currentQuestionIndex < shuffledQuestions.length) {
    showQuestion();
  } else {
    showScore();
  }
});

function showScore() {
  resetState();
  questionElement.innerText = "Quiz Finished!";
  scoreElement.innerText = `Your score: ${score} / ${shuffledQuestions.length}`;
  nextButton.innerText = "Restart";
  nextButton.style.display = "block";
  nextButton.onclick = () => startGame();
}

startGame();
</script>
</body>
</html>
